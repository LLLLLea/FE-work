# 异步与事件循环

`异步编程`的核心就是处理程序中`现在`运行部分和`将来`运行部分之间的关系。

#### 什么是异步代码？

任何时候，只要把一段代码包装成函数，并指定它在响应某个事件（定时器、鼠标点击、Ajax响应）时执行，就在代码中创建了一个`将来执行`的块，
也就是在程序中引入了异步机制。

## 事件循环

    直到ES6，javascript才真正`内建`有异步的概念！！！
    
javascript引擎本身所做的事情只不过是在`需要`的时候，在给定的任意时刻执行某个代码块而已。
`需要`就是指`宿主环境`的需要，异步特性的实现是由这些宿主环境来提供的！！！宿主环境提供了一种机制来处理程序中多个块的执行，
执行每个块时调用javascript引擎，这种机制被称为`事件循环`。换句话说，javascript引擎并没有时间的概念，它只是一个按需执行
代码块的环境。事件的调度总由包含它的环境实现。

    回调函数都会被插入`循环队列`，如果队列中有等待事件，就会摘下一个事件并执行，这些事件就是回调函数。每次循环称为一个`tick`。
    
需要注意的是： `setTimeout`并没有马上把事件挂到循环队列中，而是设定一个定时器，当定时器到时后，宿主环境会把你的回掉函数放入事件循环。

    ES6精确指定了事件循环的工作细节，这意味着在技术上将其纳入了javascript引擎的管理范围，而不是只由宿主环境来管理！

